@tailwind base;
@tailwind components;
@tailwind utilities;

@layer components {
  .container {
    width: 100%;
    margin-left: auto;
    margin-right: auto;
    padding-left: 1rem;
    padding-right: 1rem;
  }

  @media (min-width: 640px) {
    .container {
      max-width: 640px;
      padding-left: 2rem;
      padding-right: 2rem;
    }
  }

  @media (min-width: 768px) {
    .container {
      max-width: 768px;
    }
  }

  @media (min-width: 1024px) {
    .container {
      max-width: 1024px;
      padding-left: 4rem;
      padding-right: 4rem;
    }
  }

  @media (min-width: 1280px) {
    .container {
      max-width: 1280px;
      padding-left: 5rem;
      padding-right: 5rem;
    }
  }

  @media (min-width: 1536px) {
    .container {
      max-width: 1400px;
      padding-left: 6rem;
      padding-right: 6rem;
    }
  }
}

/* Override MapLibre z-index to prevent it from overlapping nav dropdowns */
.maplibregl-map {
  z-index: 0 !important;
}

.maplibregl-canvas-container {
  z-index: 0 !important;
}

/* Custom MapLibre popup styling */
.station-popup-container .maplibregl-popup-content {
  background: transparent;
  padding: 0;
  box-shadow: none;
  border-radius: 0;
}

.station-popup-container .maplibregl-popup-tip {
  border-top-color: rgb(15, 23, 42);
  border-bottom-color: rgb(15, 23, 42);
}

/* Pulse animation for markers with elevated AQI */
@keyframes marker-pulse {
  0%, 100% {
    opacity: 1;
    box-shadow: 0 0 0 0 currentColor;
  }
  50% {
    opacity: 0.85;
    box-shadow: 0 0 0 4px currentColor;
  }
}

.station-marker-pulse {
  animation: marker-pulse 2s ease-in-out infinite;
}

@layer base {
  :root {
    --background: 222 47% 11%;
    --foreground: 210 40% 98%;
    --primary: 199 89% 48%;
    --primary-foreground: 222 47% 11%;
    --secondary: 217 33% 17%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217 33% 17%;
    --muted-foreground: 215 20% 65%;
    --accent: 38 92% 50%;
    --accent-foreground: 222 47% 11%;
    --destructive: 0 84% 60%;
    --destructive-foreground: 210 40% 98%;
    --border: 217 33% 17%;
    --input: 217 33% 17%;
    --ring: 199 89% 48%;
    --radius: 0.5rem;
    --card: 222 47% 11%;
    --card-foreground: 210 40% 98%;
    --popover: 222 47% 11%;
    --popover-foreground: 210 40% 98%;
  }

  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground antialiased;
  }
}

/* Terminal cursor blink animation */
@keyframes cursor-blink {
  0%, 50% { opacity: 1; }
  51%, 100% { opacity: 0; }
}

.animate-cursor-blink {
  animation: cursor-blink 1s step-end infinite;
}

/* Shake animation for validation errors */
@keyframes shake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }
  20%, 40%, 60%, 80% { transform: translateX(4px); }
}

.animate-shake {
  animation: shake 0.4s ease-in-out;
}

/* Pulse animation for transmitting state */
@keyframes pulse-subtle {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.6; }
}

.animate-pulse-subtle {
  animation: pulse-subtle 1.5s ease-in-out infinite;
}

/* Focus ring fade-in */
.focus-ring-fade {
  transition: box-shadow 150ms ease, border-color 150ms ease;
}
